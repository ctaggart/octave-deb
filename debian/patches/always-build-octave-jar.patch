Description: Ensure that octave.jar is built even if java is disabled
 On some archs we pass --disable-java to the configure script, but we still
 want octave-common to contain octave.jar if built on those archs.
Author: Sébastien Villemot <sebastien@debian.org>
Forwarded: not-needed
Reviewed-by: Rafael Laboissière <rafael@debian.org>
Last-Update: 2016-11-20
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- a/scripts/java/module.mk
+++ b/scripts/java/module.mk
@@ -1,3 +1,6 @@
+JAVAC=javac
+JAR=jar
+
 FCN_FILE_DIRS += scripts/java
 
 %canon_reldir%_FCN_FILES = \
@@ -11,22 +14,18 @@ FCN_FILE_DIRS += scripts/java
   %reldir%/javarmpath.m \
   %reldir%/usejava.m
 
-if AMCOND_HAVE_JAVA
 %canon_reldir%_JAR_FILES = %reldir%/octave.jar
 
 JAR_FILES += $(%canon_reldir%_JAR_FILES)
-endif
 
 org_octave_dir = org/octave
 
-if AMCOND_HAVE_JAVA
 JAVA_SRC = \
   $(org_octave_dir)/ClassHelper.java \
   $(org_octave_dir)/Matrix.java \
   $(org_octave_dir)/OctClassLoader.java \
   $(org_octave_dir)/Octave.java \
   $(org_octave_dir)/OctaveReference.java
-endif
 
 JAVA_CLASSES = $(JAVA_SRC:.java=.class)
 
@@ -51,13 +50,11 @@ $(%canon_reldir%_JAVA_CLASSES) : %.class
 	             -d $(abs_top_builddir)/scripts/java \
 	             $(org_octave_dir)/$(<F) )
 
-if AMCOND_HAVE_JAVA
 %reldir%/octave.jar: $(%canon_reldir%_JAVA_CLASSES)
 	$(OCT_V_JAR)rm -f $@-t $@ && \
 	( cd scripts/java; \
 	  "$(JAR)" cf octave.jar-t $(JAVA_CLASSES) ) && \
 	mv $@-t $@
-endif
 
 %canon_reldir%dir = $(fcnfiledir)/java
 
